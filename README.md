# Connectedsy

Live site: [https://connectedsy-hachathon.onrender.com/](https://connectedsy-hachathon.onrender.com/)

![Logo](static/images/logo.png)

Created for the Code Institute's May 2022 Hackathon, Getting Connected.

# About 

Connectedsy is an online communication platform aimed towards people experiencing loneliness and other mental health issues. The platform allows users to create their very own profile where they can include some of their personal hobbies and interests. This profile is then stored in a database, allowing users to return to the site at any time and have their preferences retained. 

Once a user signs up for the site, they can jump straight into a chat room that is relevant to what they are experiencing, and connect with people who understand what they are going through. They can then speak openly about themselves, what they are experiencing, and about shared hobbies and interests. The primary goal is to ensure that users know that they are always welcome on Connectedsy and always have a space to talk and be supported.

In creating this platform, our team has put great emphasis on creating Connectedsy as a safe space where people can speak freely, express themselves and be supported by each other. However, we ensure that users are aware from the outset that the platform is not intended to be a substitute for professional help and we encourage users to seek professional help should they need it.

# Target Audience

Connectedsy is an online communication platform aimed towards people experiencing mental health issues. There are a variety of chat rooms that are separated by different mental health issues that include depression, social anxiety, PTSD and more. In creating Connectedsy, our team aims to create a space for people to connect with others who are suffering from similar issues. The platform also includes a chat room for people who may not be suffering from any severe mental health issues, but still may be experiencing loneliness and would like to connect with others.

# Marketing

In addition to our target audience, our team aims to market Connectedsy towards mental health professionals. The goal is to encourage such professionals to join our chat rooms and provide advice to users. This would be a great opportunity for mental health professionals to provide valuable support and advice on a charitable basis.

![Site on a variety of device sizes](/documentation/readme/images/responsive.jpg)

[Visit the site here](https://connectedsy.herokuapp.com/)

## CONTENTS

* [User Experience (UX)](https://github.com/PratimaGurav/Team4-May-Hackathon#user-experience-ux)
  * [User Stories](https://github.com/PratimaGurav/Team4-May-Hackathon#user-stories)

* [Design](https://github.com/PratimaGurav/Team4-May-Hackathon#design)
  * [Colour Scheme](https://github.com/PratimaGurav/Team4-May-Hackathon#colour-scheme)
  * [Typography](https://github.com/PratimaGurav/Team4-May-Hackathon#typography)
  * [Imagery](https://github.com/PratimaGurav/Team4-May-Hackathon#imagery)
  * [Wireframes](https://github.com/PratimaGurav/Team4-May-Hackathon#wireframes)
  * [Features](https://github.com/PratimaGurav/Team4-May-Hackathon#features)
  * [Accessibility](https://github.com/PratimaGurav/Team4-May-Hackathon#accessibility)

* [Technologies Used](https://github.com/PratimaGurav/Team4-May-Hackathon#technologies-used)
  * [Languages Used](https://github.com/PratimaGurav/Team4-May-Hackathon#languages-used)
  * [Frameworks, Libraries & Programs Used](https://github.com/PratimaGurav/Team4-May-Hackathon#frameworks-libraries--programs-used)

* [Deployment & Local Development](https://github.com/PratimaGurav/Team4-May-Hackathon#deployment--local-development)
  * [Deployment](https://github.com/PratimaGurav/Team4-May-Hackathon#deployment)
  * [Render Deployment](https://render.com/)
  * [Local Development](https://github.com/PratimaGurav/Team4-May-Hackathon#local-development)
    * [How to Fork](https://github.com/PratimaGurav/Team4-May-Hackathon#how-to-fork)
    * [How to Clone](https://github.com/PratimaGurav/Team4-May-Hackathon#how-to-clone)

* [Testing](https://github.com/PratimaGurav/Team4-May-Hackathon#testing)
  
* [Credits](https://github.com/PratimaGurav/Team4-May-Hackathon#credits)
  * [Content](https://github.com/PratimaGurav/Team4-May-Hackathon#content)
  * [Media](https://github.com/PratimaGurav/Team4-May-Hackathon#media)
  * [Acknowledgments](https://github.com/PratimaGurav/Team4-May-Hackathon#acknowledgments)

- - -

## User Experience (UX)

### User Stories

#### First Time Visitor Goals

* As a user, I would like a platform where I can meet and chat to people virtually.
* As a user, I would like to be able to sign into the platform and select specific hobbies and interests so that I can join groups with people who have similar hobbies and interests.
* As a user, I would find it helpful if the chatroom could provide the group with topic relevant ice breaker questions, to help start a conversation.

#### Returning/Frequent Visitor Goals

* As a regular user, I would like to have my hobbies and interests saved to a profile after I sign up, so that when I am returning to the platform I can just sign in and jump straight into my preferred chatroom.
* As a user, I would like a section of the platform that provides information on mental health issues and online resources I can use if I need them.

- - -

## Design

### Colour Scheme


![Site Colour Palette](documentation/design/collor%20pallet.JPG)

### Typography

Google Fonts was used to import the chosen fonts for use in the site.

Fonts used: Montserrat, Raleway.

The Montserrat family is used in the header text and  with Raleway being used in the individual section content. Sans-serif is set as the fallback font in every case in case the other fonts cannot be imported correctly. Montserrat and Raleway are used as they are clean, sleek and easy to read.

  ![Font](documentation/design/montserrat%20font.JPG)
  ![Font](documentation/design/raleway%20font.JPG)


### Imagery

### Wireframes

Wireframes were created for mobile, tablet and desktop with [Balsamiq]()

[Desktop](/documentation/wireframes/desktop.pdf) |
[Tablet](/documentation/wireframes/tab.pdf) |
[Mobile](/documentation/wireframes/mobile.pdf) |

### Features

The website is comprised of:

The website is comprised of:

1. Home page.
![Home screenshot](/documentation/readme/images/homescreen.jpg)
![Logged-in Home screenshot](/documentation/readme/images/homescreen-2.jpg)
2. Chat Rooms List.
![Chat Rooms List screenshot](/documentation/readme/images/chat-list.jpg)
3. Chat Room.
![Chat Rooms screenshot](/documentation/readme/images/chat-room.jpg)
4. Sign-up.
![Sign-up screenshot](/documentation/readme/images/sign-up.jpg)
5. Sign-in.
![Sign-in screenshot](/documentation/readme/images/sign-in.jpg)
6. Sign-out.
![Sign-out screenshot](/documentation/readme/images/sign-out.jpg)
7. User Profile.
![User-Profile screenshot](/documentation/readme/images/user-profile.jpg)
8. Edit Profile.
![Edit-Profile screenshot](/documentation/readme/images/edit-profile.jpg)
9. Delete Profile.
![Delete-Profile screenshot](/documentation/readme/images/delete-profile.jpg)
10. Rewards.
![Rewards screenshot](/documentation/readme/images/rewards.png)
11. Messages.
![Messages screenshot](/documentation/readme/images/messages.jpg)
12. Contact us page.
![contact screenshot](/documentation/readme/images/contact.jpg)
13. 404 error page.
![404 screenshot](/documentation/readme/images/404.jpg)
14. 500 error page.
![500 screenshot](/documentation/readme/images/500.jpg)

All Pages on the website have:

* A favicon icon.
    ![Favicon Icon](/documentation/readme/images/favicon.jpg)
* A responsive navbar.
    ![Navbar](/documentation/readme/images/header-2.jpg)
    ![Logged-in Navbar](/documentation/readme/images/header.jpg)
* A responsive footer.
    ![Footer](/documentation/readme/images/footer.jpg)


* Future Implementations.

  * In a future update of Connectedsy, we will implement special profiles on the platform for mental health professionals. The aim here would be for mental health professionals to join chat rooms based on their particular areas of expertise and provide advice to users where appropriate and on a pro-bono basis.

  * In a future update of Connectedsy, we will include a blog page that provides users with information on mental health issues, along with online resources they can use.

  * There is a known bug on the platform which allows users to send empty chat messages. Our team is aiming to fix this in a future update of Connectedsy. More information can be found in the Known Bugs section of the testing.md file.

### Accessibility

We have been mindful during coding to ensure that the website is as accessible friendly as possible.

## Technologies Used

- ### Languages:
    
    + [Python 3.8.5](https://www.python.org/downloads/release/python-385/): the primary language used to develop the server-side of the website.
    + [JS](https://www.javascript.com/): the primary language used to develop interactive components of the website.
    + [HTML](https://developer.mozilla.org/en-US/docs/Web/HTML): the markup language used to create the website.
    + [CSS](https://developer.mozilla.org/en-US/docs/Web/css): the styling language used to style the website.


- ### Frameworks and libraries:
    + [Django](https://www.djangoproject.com/): python framework used to create all the logic.
    + [jQuery](https://jquery.com/): was used to control click events and sending AJAX requests.
    + [jQuery User Interface](https://jqueryui.com/) was used to create interactive elements.
- ### Databases:
    + [SQLite](https://www.sqlite.org/): was used as a development database.
    + [PostgreSQL](https://www.postgresql.org/): the database used to store all the data.
- ### Other tools:
    + [Git](https://git-scm.com/): the version control system used to manage the code.
    + [Pip3](https://pypi.org/project/pip/): the package manager used to install the dependencies.
    + [Daphne](https://daphne.readthedocs.io/en/latest/): the webserver used to run the website.
    + [Spycopg2](https://www.python.org/dev/peps/pep-0249/): the database driver used to connect to the database.
    + [Django-allauth](https://django-allauth.readthedocs.io/en/latest/): the authentication library used to create the user accounts.
    + [Django-crispy-forms](https://django-cryptography.readthedocs.io/en/latest/): was used to control the rendering behavior of Django forms.
    + [Render](https://render.com/): the cloud platform used to host the website.
    + [GitHub](https://github.com/): used to host the website's source code.
    + [VSCode](https://code.visualstudio.com/): the IDE used to develop the website.
    + [Chrome DevTools](https://developer.chrome.com/docs/devtools/open/): was used to debug the website.
    + [Font Awesome](https://fontawesome.com/): was used to create the icons used in the website.
    + [Draw.io](https://www.lucidchart.com/) was used to make a flowchart for the README file.
    + [Coolors](https://coolors.co/202a3c-1c2431-181f2a-0b1523-65e2d9-925cef-6b28e0-ffffff-eeeeee) was used to make a color palette for the website.
    + [BGJar](https://www.bgjar.com/): was used to make a background images for the website.
    + [W3C Validator](https://validator.w3.org/): was used to validate HTML5 code for the website.
    + [W3C CSS validator](https://jigsaw.w3.org/css-validator/): was used to validate CSS code for the website.
    + [JShint](https://jshint.com/): was used to validate JS code for the website.
    + [PEP8](https://pep8.org/): was used to validate Python code for the website.
    + [Cloudinary](https://cloudinary.com/): the image hosting service used to upload images and other media.
    + [Django-channels](https://channels.readthedocs.io/) real-time communication library.

HTML, CSS, Javascript, Bootstrap5, Django, Channels, JQuery, JQuery UI, Redis

- - -



## Flowcharts

The flowcharts were created using [Draw.io](https://www.lucidchart.com/).

- [Flowchart](documentation/flowchart/flowchart.pdf)

---

## Information Architecture

### Database

* During the earliest stages of the project, the database was created using SQLite.
* The database was then migrated to PostgreSQL.

### Entity-Relationship Diagram

* The ERD was created using [Draw.io](https://www.lucidchart.com/).

- [Database Scheme](documentation/db/db.pdf)

### Data Modeling

1. **Allauth User Model**
    - The user model was created using [Django-allauth](https://django-allauth.readthedocs.io/en/latest/).
    - The user model was then migrated to PostgreSQL.

2. **Profile Model**

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| User          | user          | OneToOneField | User, on_delete=models.CASCADE,related_name='user_profile' |
| Avatar      | avatar        | CloudinaryField    | folder='profile_images'       |
| Stewardship   | stewardship   | ManyToManyField | User, related_name='stewards', blank=True |
| Bio          | bio           | TextField | |

3. **Chat Model**

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| Chat Name     | chat_name     | CharField     | max_length=100, unique=True |
| Slug          | slug          | SlugField     | unique=True, null=True |
| Description   | chat_description | CharField     | max_length=250 |
| Logo          | chat_logo      | CloudinaryField    | folder='chat_logo', null=True, blank=True |
| Created At    | created_at     | DateTimeField | auto_now_add=True |

4. **ChatMessage Model**

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| Chat          | chat          | ForeignKey    | Chat, on_delete=models.CASCADE, related_name='messages' |
| User          | user          | ForeignKey    | User, on_delete=models.CASCADE, related_name='messages' |
| Content      | content       | CharField     | max_length=500, blank=True |
| Created At    | created_at     | DateTimeField | auto_now_add=True |
| Image         | image         | CloudinaryField    | folder='chat_messages', null=True, blank=True |

5. **Reaction Model**

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| ChatMessage   | chat_message  | ForeignKey    | ChatMessage, on_delete=models.CASCADE, related_name='reactions' |
| User          | user          | ForeignKey    | User, on_delete=models.CASCADE, related_name='reactions' |
| Emoji         | emoji         | URLField     |  |

## Deployment & Local Development

### Deployment

### Using Heroku
- Development Enviroment
  1.  Create env.py : It needs to contain these 3 variables.
    - [Cloudinary](https://cloudinary.com/)
    - Secret key is the password of your choice.
    - [Heroku](https://id.heroku.com/) postgreSQL.
    ![env file](/documentation/deployment/env.jpg)
  2. Create requirements.txt file that includes all dependencies needed for the project.
    
    - You can do this by executing the following command in the terminal:
      ```
      pip freeze > requirements.txt
      ```
    
    - Or using the package pipreqs.
      ```
      pipreqs requirements.txt
      ```

  3. Create Procfile containing the commands to run the app.

    - In our case, we are using the following commands:
      ```
      web: daphne group_chatting.asgi:application --port $PORT --bind 0.0.0.0 -v2
      worker: python manage.py runworker -v2 channel_layer
      ```

    - Daphne was used instead of Gunicorn because it is able to run asgi applications.
    - Second command starts the worker for the channel layer.

  4. Commit and push deployment changes to Github.
  5. Create an account and login to Heroku
    - Create a new app, with an appropriate app name and choose a region.
    ![Create App](/documentation/deployment/heroku-create-app.jpg)
    - In Resources add Heroku Postgres and Heroku Redis.
    ![Resources](/documentation/deployment/heroku-resources.jpg)
    
    ![Config Vars](/documentation/deployment/heroku-configvars.jpg)
    - At the settings tab click on Reveal Config Vars.
    - Add the following config vars or check if they are already added.
      - `DATABASE_URL` : The URL of the database provided by Heroku Postgres.
      - `SECRET_KEY` : The secret key for your Django project.
      - `REDIS_URL` : The URL of the Redis channel layer provided by Heroku Redis.
      - `REDIS_TLS_URL` : The secure URL of the Redis channel layer provided by Heroku Redis.
      - `CLOUDINARY_CLOUD_NAME` : Your Cloudinary Cloud Name.
      - `CLOUDINARY_API_KEY` : Your Cloudinary API Key.
      - `CLOUDINARY_API_SECRET` : Your Cloudinary API Secret.
      - `DISABLE_COLLECTSTATIC` : Set to `1` to disable collectstatic during the development.
    
    - To work on the same database and same Redis channel layer, you need to copy these config vars to your env.py file.
    - Download and install [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)
    - And pass following commands in your github terminal:
      - $ heroku login -i
      - Then enter your login credentials
      - $ git add .
      - $ git commit -am "make it better"
      - $ git push heroku main
    

  6. Open the Heroku dashboard and check the status of your app.
      - Copy the URL of your app and add it into `ALLOWED_HOSTS` in your settings.py file.
  7. When the development stage is complete:
    - make sure that you have these settings in your settings.py file:
      - `STATIC_ROOT` : The path to the static files.
      - `DEFUALT_FILE_STORAGE` : The default file storage system, in this case, `cloudinary_storage.storage.MediaCloudinaryStorage`
      - `cloudinary` and `cloudinary_storage` are added to `INSTALLED_APPS`, and `cloudinary.config(...)` receives cloud name, api key, and api secret.
    - Remove the `DISABLE_COLLECTSTATIC` variable from your app's config vars on Heroku.
    - Set the `DEBUG` variable to `False` in your your app's config vars on Heroku.
    - Deploy the latest version of your app to Heroku.
    - Open the Heroku dashboard and check the status of your app.
    - If something is wrong, you can find an error message in the logs and fix it.

---

## Render Deployment

### Create Database on ElephantSQL

1. Go to [ElephantSQL](https://www.elephantsql.com/) and create a new account.

2. Create a new instance of the database.

    - ![ElephantSQL. Create a new instance](documentation/deployment/elephantsql_create_new_instance.png)

3. Select a name for your database and select the free plan.

    - ![ElephantSQL. Select a name for your database](documentation/deployment/elephantsql_name.png)

4. Click "Select Region"

    - ![ElephantSQL. Select a region](documentation/deployment/elephantsql_select_region.png)

5. Select a region close to you.

    - ![ElephantSQL. Select a region](documentation/deployment/elephantsql_select_region_near_you.png)

6. Click "Review"

    - ![ElephantSQL. Review](documentation/deployment/elephantsql_click_review.png)

7. Click "Create Instance"

    - ![ElephantSQL. Create Instance](documentation/deployment/elephantsql_click_create_instance.png)

8. Click on the name of your database to open the dashboard.

    - ![ElephantSQL. Open dashboard](documentation/deployment/elephantsql_click_db_name.png)

9. You will see the dashboard of your database. You will need the URL of your database to connect it to your Django project.

    - ![ElephantSQL. DB](documentation/deployment/elephantsql_db_url.png)



#### How to Fork

To fork the repository:

1. Log in (or sign up) to Github.
2. Go to the repository for this project, [Connectedsy](https://github.com/PratimaGurav/Team4-May-Hackathon).
3. Click the Fork button in the top right corner.

#### How to Clone

To clone the repository:

1. Log in (or sign up) to GitHub.
2. Go to the repository for this project, [Connectedsy](https://github.com/PratimaGurav/Team4-May-Hackathon).
3. Click on the code button, select whether you would like to clone with HTTPS, SSH or GitHub CLI and copy the link shown.
4. Open the terminal in your code editor and change the current working directory to the location you want to use for the cloned directory.
5. Type 'git clone' into the terminal and then paste the link you copied in step 3. Press enter.

- - -

## Testing

Please find our separate .md file for testing [here](TESTING.md).

- - -

## Bugs

### Known Bugs

- In the chats users can send empty messages if they put spaces or empty lines in chat input.
    + This can be fixed by trimming the message before checking if it is empty, but due to time constraints, we have not done that.
- There is a known bug where users can click Enter and send blank messages. Due to time constraints on this project, we were unable to fix this before final deployment but intend on doing so in a future update.    

### Solved Bugs

- After the user has sent a message, the chat input field was not cleared.
    + Has been fixed by clearing the chat input field after the user has sent a message.

- After receiving a message, the sender's avatar url was broken and image was not displayed.
    + Has been fixed by adding the sender's avatar url to the message.

- After receiving a message, the emoji reaction button on the message was not clickable.
    + Has been fixed by adding an event listener to the emoji reaction button after the message has been received and html was created by javascript.

- After clicking on other user's profile url, the active user's profile was opened instead of the other user's profile.
    + Has been fixed by modifying the view function to get the requested user's url from the url and then pass it to the template.

- After registering, the profile was not created for the user.
    + Has been fixed by adding signals to the profiles app to create the profile for each user right after the user has been created.

- After deploying the app, the static files were not being served by cloudinary.
    + Has been fixed by changing the order of the `INSTALLED_APPS` in the settings.py file. `cloudinary_storage` and `cloudinary`  should be added after `django.contrib.staticfiles`.

## Credits

### Content

Links used for researching Mental Health issues:
- [Mind](https://www.mind.org.uk/information-support/types-of-mental-health-problems/)
- [BetterHelp](https://www.betterhelp.com/advice/psychiatry/do-i-have-a-mental-illness-28-mental-disorders-and-their-symptoms/)
- [Re-Think](https://www.rethink.org/advice-and-information/about-mental-illness/learn-more-about-conditions/bipolar-disorder/)
- [MQ Mental Health](https://www.mqmentalhealth.org/conditions/eating-disorders/?gclid=Cj0KCQjw1ZeUBhDyARIsAOzAqQKxpq2q-o7YPWqz1bSAZKr-oT8Kc7AZ5pK3Bcl9DRIpwbtDriyE_HUaAj_8EALw_wcB)
- [NHS](https://www.nhs.uk/mental-health/conditions/post-natal-depression/overview/#overview)

### Media

- [Pexels](https://www.pexels.com/) for the images.
- [Favicon converter](https://favicon.io/favicon-converter/) to generate favicons from an image we borrowed from [this page](https://www.pinclipart.com/maxpin/oRmTTb/).

### Acknowledgments

* Thank you to the incredible team that worked on this project, not only for their skill but also their kindness and team work ethos.
* Shoutout to Code Institute and Trust In SODA for hosting this month's Hackathon and for choosing such an important topic.
* Thank you to Kasia Bogucka, our group's facilitator from Code Institute.
* Our families, for their endless patience while we disappear for another long weekend of hackathon coding.



#### Meet team Connectedsy!:

* [Aleksei Konovalov](https://github.com/lexach91)
* [Amare Teklay Hailu](https://github.com/Amareteklay)
* [David Campo](https://github.com/pizzaHunt3r)
* [Iuliia Konovalova](https://github.com/IuliiaKonovalova)
* [Pratima Gurav](https://github.com/PratimaGurav)
* [Stephen Brereton](https://github.com/StephenB92)


## [BACK TO TOP](https://github.com/PratimaGurav/Team4-May-Hackathon#readme)